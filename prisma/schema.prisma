generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

enum EventStatus {
  pending
  processed
  failed
}

model WebhookEvent {
  id         String
  provider   String
  eventType  String

  status     EventStatus @default(pending)

  payload    Json

  attempts   Int         @default(0)
  lastError  String?

  receivedAt DateTime    @default(now())
  processedAt DateTime?

  @@id([provider, id])
  @@index([status])
  @@index([receivedAt])
}
